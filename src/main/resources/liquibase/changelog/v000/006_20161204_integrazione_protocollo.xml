<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd"
logicalFilePath="v000/006_20161204_integrazione_protocollo.xml">
    <changeSet author="dpranteda (generated)" id="1480875431607-1">
        <createTable tableName="proto_batch_log">
            <column name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="proto_batch_logPK"/>
            </column>
            <column name="cod_stato" type="VARCHAR(255)"/>
            <column name="dt_ins" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="dt_spedizione" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="dt_upd" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="log" type="VARCHAR(255)"/>
            <column name="n_spedizione" type="VARCHAR(255)"/>
            <column name="stato" type="VARCHAR(255)"/>
            <column name="protocollo_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="dpranteda (generated)" id="1480875431607-2">
        <createTable tableName="protocollo">
            <column name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="protocolloPK"/>
            </column>
            <column name="action_after_protocollo" type="VARCHAR(255)"/>
            <column name="data" type="date"/>
            <column name="id_proto_batch" type="VARCHAR(255)"/>
            <column name="numero" type="INT"/>
            <column name="stato_spedizione" type="VARCHAR(255)"/>
            <column name="accreditamento_id" type="BIGINT"/>
            <column name="file_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="dpranteda (generated)" id="1480875431607-3">
        <addColumn tableName="file">
            <column name="protocollo_id" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="dpranteda (generated)" id="1480875431607-4">
        <addForeignKeyConstraint baseColumnNames="file_id" baseTableName="protocollo" constraintName="FK_35kf8naj2w2odr98y6aiynu9g" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="file"/>
    </changeSet>
    <changeSet author="dpranteda (generated)" id="1480875431607-5">
        <addForeignKeyConstraint baseColumnNames="accreditamento_id" baseTableName="protocollo" constraintName="FK_96hmevwgm2ffarxqywt2x55a2" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="accreditamento"/>
    </changeSet>
    <changeSet author="dpranteda (generated)" id="1480875431607-6">
        <addForeignKeyConstraint baseColumnNames="protocollo_id" baseTableName="file" constraintName="FK_eocx6qs48tgw17tkyochqpje0" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="protocollo"/>
    </changeSet>
    <changeSet author="dpranteda (generated)" id="1480875431607-7">
        <addForeignKeyConstraint baseColumnNames="protocollo_id" baseTableName="proto_batch_log" constraintName="FK_o9vne77upca9vpfxrdxgba7k" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="protocollo"/>
    </changeSet>
</databaseChangeLog>

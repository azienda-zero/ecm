<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorator="fragments/template">
<head lang="it">
</head>
<body>
	<th:block th:fragment="eventoRESEdit">

		<div class="x_content">


			<!--  TODO RIMUOVERE NUMERAZIONE HARDCODATA E METTERLA IN UN ENUM?  -->

			<form id="formEventoRES" class="form-horizontal form-label-left"
				th:action="@{|/provider/${eventoWrapper.providerId}/evento/save|}"
				method="post" enctype="multipart/form-data"
				novalidate="novalidate">

				<!-- input hidden -->
				<input type="hidden" name="editId" th:value="${eventoWrapper.evento.id}" />
				<input type="hidden" name="providerId" th:value="${eventoWrapper.providerId}" />
				<input type="hidden" name="proceduraFormativa" th:value="${eventoWrapper.proceduraFormativa}" />

				<!-- DENOMINAZIONE LEGALE PROVIDER -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>1</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="denominazioneProvider">
						<span th:text="#{label.denominazione_legale_provider}">Denominazione Legale del Provider</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="denominazioneProvider">
						<div class="value-edit" th:text="${eventoWrapper.evento.provider.denominazioneLegale}"></div>
					</div>
				</div>

				<!-- ID PROVIDER -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>2</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="idProvider">
						<span th:text="#{label.id_provider}">Id del Provider</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="idProvider">
						<div class="value-edit" th:text="${eventoWrapper.evento.provider.id}"></div>
					</div>
				</div>

				<!-- TIPOLOGIA EVENTO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>3</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="proceduraFormativa">
						<span th:text="#{label.procedura_formativa}">Id del Provider</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="proceduraFormativa">
						<div class="value-edit" th:text="${eventoWrapper.evento.proceduraFormativa}"></div>
					</div>
				</div>

				<div class="divider-dashed"></div>

				<!-- DESTINATARI EVENTO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>4</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="destinatari">
						<span th:text="#{label.procedura_formativa}">Id del Provider</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="destinatari">
						<div class="checkbox" th:each="destinatario, row : ${T(it.tredi.ecm.dao.enumlist.DestinatariEventoEnum).values()}">
							<label>
								<input type="checkbox" class="flat" th:field="${eventoWrapper.evento.destinatariEvento}" th:value="${destinatario}" />
								<span th:text="${destinatario.nome}"></span>
							</label>
						</div>
					</div>
				</div>

				<div class="divider-dashed"></div>

				<!-- CONTENUTI EVENTO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>5</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="contenuti">
						<span th:text="#{label.evento_contiene_questi_contenuti}">L'evento formativo prevedere i seguenti contenuti?</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="contenuti">
						<div class="radio" th:each="contenuto, row : ${T(it.tredi.ecm.dao.enumlist.ContenutiEventoEnum).values()}">
							<label>
								<input type="radio" class="flat" th:field="${eventoWrapper.evento.contenutiEvento}" th:value="${contenuto}" />
								<span th:text="${contenuto.nome}"></span>
							</label>
						</div>
					</div>
				</div>

				<div class="divider-dashed"></div>

				<!-- TITOLO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>6</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="titolo">
						<span th:text="#{label.titolo}">Titolo</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="titolo">
						<textarea class="required" maxlength="3000" id="title" rows="3" name="titolo"
							style="resize: none;" th:field="${eventoWrapper.evento.titolo}">
						</textarea>
						<div id="counter"></div>
					</div>
				</div>

				<div class="divider-dashed"></div>

				<!-- BLOCCO INFO SEDE -->
				<div class="item form-group">
					<label class="col-xs-12">
						<span th:text="#{label.informazioni_sede}">Titolo</span>
					</label>
				</div>
				<!-- PROVINCIA -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>7</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="provincia">
						<span th:text="#{label.provincia}">Provincia</span>
						<span class="required">*</span>
					</label>
					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12">
						<select id="provincia"
							class="selectpicker required"
							th:field="${eventoWrapper.evento.sedeEvento.provincia}"
							data-width="100%" data-style="btn-primary"
							data-actions-box="true" data-size="10"
							data-hide-disabled="false"
							onchange="sendAjaxRequestProvincia()"
							title="Seleziona una provincia...">
							<option
								th:each="provincia : ${elencoProvince}"
								th:value="${provincia}"
								th:text="${provincia}">
							</option>
						</select>
					</div>
				</div>
				<!-- COMUNE -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>8</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="comune">
						<span th:text="#{label.comune}">Comune</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12">
						<select id="comune"
							class="selectpicker required"
							th:field="${eventoWrapper.evento.sedeEvento.comune}"
							data-width="100%" data-style="btn-primary"
							data-actions-box="true" data-size="10"
							data-hide-disabled="false"
							th:disabled="${eventoWrapper.evento.sedeEvento.comune == null}"
							title="Seleziona un comune...">
							<!-- options popolate alla selezione della provincia -->
						</select>
					</div>
				</div>
				<!-- INDIRIZZO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>9</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="indirizzo">
						<span th:text="#{label.indirizzo}">Indirizzo</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="indirizzo">
						<input type="text" class="form-control" th:field="${eventoWrapper.evento.sedeEvento.indirizzo}" />
					</div>
				</div>
				<!-- LUOGO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>10</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="luogo">
						<span th:text="#{label.luogo}">Luogo</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="luogo">
						<input type="text" class="form-control" th:field="${eventoWrapper.evento.sedeEvento.luogo}" />
					</div>
				</div>

				<div class="divider-dashed"></div>

				<!-- DATA INIZIO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>11</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="dataInizio">
						<span th:text="#{label.data_inizio}">Data inizio</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12 input-group datapick">
						<input type="text" id="dataInizio" class="form-control"
							name="data" th:field="${eventoWrapper.evento.dataInizio}" />
						<span class="input-group-addon" id="dataInizio" onclick="$('#dataInizio').click()">
 							<i class="glyphicon glyphicon-calendar"></i>
						</span>
					</div>
				</div>

				<!-- DATA FINE -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>12</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="dataFine">
						<span th:text="#{label.data_fine}">Data fine</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12 input-group datapick">
						<input type="text" id="dataFine" class="form-control"
							name="data" th:field="${eventoWrapper.evento.dataFine}" />
						<span class="input-group-addon" id="dataFineButton" onclick="$('#dataFine').click()">
 							<i class="glyphicon glyphicon-calendar"></i>
						</span>
					</div>
				</div>

				<!-- DATE INTERMEDIE -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>13</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="dateIntermedie">
						<span th:text="#{label.date_intermedie}">Data intermedie</span>
						<span class="required">*</span>
					</label>
				</div>
				<div class='nextDataIntermedia item form-group'>
					<div class='col-md-4 col-sm-4 col-xs-12'></div>
					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12 input-group datapick">
						<input type="text" class="form-control datapicker-intermedia"
							th:field="${eventoWrapper.dateIntermedieTemp[__${#lists.size(eventoWrapper.dateIntermedieTemp)}__]}" />
						<span class="input-group-addon not-last" onclick="$(this).prev().click()">
 							<i class="glyphicon glyphicon-calendar"></i>
						</span>
						<span class="input-group-addon" onclick="aggiungiDataIntermedia(this)">
							<i class="fa fa-plus"></i>
						</span>
					</div>
				</div>
				<div class="date-intermedie-container"></div>

				<!-- OBIETTIVO NAZIONALE -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>14</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="obiettivoNazionale">
						<span th:text="#{label.obiettivo_formativo_nazionale}">Obiettivo Strategico Nazionale</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-11">
						<select id="obiettivoNazionale"
							class="selectpicker required"
							th:field="${eventoWrapper.evento.obiettivoNazionale}"
							data-width="100%" data-style="btn-primary"
							data-actions-box="true" data-size="10"
							data-hide-disabled="false"
							title="Seleziona un obiettivo...">
							<optgroup class="optgroup-primary"
								th:each="categoriaObiettivoNazionale, row: ${T(it.tredi.ecm.dao.enumlist.CategoriaObiettivoNazionale).values()}"
								th:label="${categoriaObiettivoNazionale.nome}"
								th:remove="all-but-first">
								<option
									th:each="obiettivoNazionale, row: ${eventoWrapper.obiettiviNazionali}"
									th:if="${obiettivoNazionale.categoria == categoriaObiettivoNazionale}"
									th:value="${obiettivoNazionale.id}"
									th:text="${obiettivoNazionale.nome}">
								</option>
							</optgroup>
						</select>
					</div>
					<div class="col-xs-1">
						<div th:attr="data-original-title=#{label.info_tooltip_obiettivo_nazionale}" class="btn btn-default no-margin cursor-default" data-toggle="tooltip" data-placement="top"><i class="fa fa-info-circle"></i></div>
					</div>
				</div>

				<!-- OBIETTIVO REGIONALE -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>15</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="obiettivorRegionale">
						<span th:text="#{label.obiettivo_formativo_regionale}">Obiettivo Strategico Regionale</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-11">
						<select id="obiettivoRegionale"
							class="selectpicker required"
							th:field="${eventoWrapper.evento.obiettivoRegionale}"
							data-width="100%" data-style="btn-primary"
							data-actions-box="true" data-size="10"
							data-hide-disabled="false"
							title="Seleziona un obiettivo...">
							<option
								th:each="obiettivoRegionale, row: ${eventoWrapper.obiettiviRegionali}"
								th:value="${obiettivoRegionale.id}"
								th:text="${obiettivoRegionale.nome}">
							</option>
						</select>
					</div>
				</div>

				<!-- PROFESSIONI/DISCIPLINE -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>16</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11">
						<span th:text="#{label.professioni_discipline}">Professioni / Discipline</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="evento_professioni-select">
						<div class="col-xs-12 select-with-margin-container">
							<select id="professioni" class="selectpicker required multi"
								multiple="multiple" data-width="100%"
								data-style="btn-primary" data-actions-box="true"
								data-size="10" title="Seleziona una professione..."
								onchange="abilitaDiscipline(this)"
								data-selected-text-format="count" th:remove="all-but-first">
								<option th:each="professione, row: ${eventoWrapper.professioneList}"
									th:value="${professione.id}" th:text="${professione.nome}"
									th:field="${eventoWrapper.evento.professioniSelezionate}"></option>
							</select>
						</div>
						<select id="discipline" class="selectpicker required multi"
							th:field="${eventoWrapper.evento.discipline}"
							multiple="multiple" data-width="100%"
							data-style="btn-success" data-actions-box="true"
							data-size="10" data-hide-disabled="true"
							title="Seleziona una disciplina..." disabled="disabled"
							data-selected-text-format="count" th:remove="all-but-first">
							<optgroup class="optgroup-success" disabled="disabled"
								th:each="professione, row: ${eventoWrapper.professioneList}" th:unless="${professione.nome == 'Nessuna professione sanitaria'}"
								th:label="${professione.nome}" th:remove="all-but-first">
								<option th:each="disciplina, row: ${eventoWrapper.disciplinaList}"
									th:if="${disciplina.professione == professione}"
									th:value="${disciplina.id}" th:text="${disciplina.nome}"></option>
							</optgroup>
						</select>
					</div>
				</div>

				<!-- BLOCCO TIPOLOGIA DI EVENTO -->
				<!-- TIPOLOGIA DELL'EVENTO -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>17</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="tipologia_evento_2">
						<span th:text="#{label.tipologia_evento}">Tipologia di Evento</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12">
						<select id="tipologia_evento_2"
							class="selectpicker required"
							th:field="${eventoWrapper.evento.tipologiaEvento}"
							data-width="100%" data-style="btn-primary"
							data-actions-box="true" data-size="10"
							data-hide-disabled="false"
							onchange="mostraNascondiCampiTipologiaEvento(this.value)"
							title="Seleziona una tipologia...">
							<option
								th:each="tipologia, row: ${T(it.tredi.ecm.dao.enumlist.TipologiaEventoRESEnum).values()}"
								th:value="${tipologia}"
								th:text="${tipologia.nome}">
							</option>
						</select>
					</div>
				</div>
				<!-- WORKSHOP/SEMINARI (attivo se selezionato convegno/congresso) -->
				<div class="item form-group convegno-congresso" style="display: none;">
					<div class="col-xs-1"></div>
					<label class="control-label col-md-3 col-sm-3 col-xs-11">
						<span th:text="#{label.workshop_radio_text}"></span>
						<span class="required">*</span>
					</label>
					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12">
						<div class="radio">
							<label class="label-radio-workshop label-disabled">
								<input type="radio" disabled="disabled" class="flat radio-workshop" th:field="${eventoWrapper.evento.workshopSeminariEcm}" th:value="true" />
								<span th:text="#{label.sì}">Sì</span>
							</label>
						</div>
						<div class="radio">
							<label class="label-radio-workshop label-disabled">
								<input type="radio" disabled="disabled" class="flat radio-workshop" th:field="${eventoWrapper.evento.workshopSeminariEcm}" th:value="false" />
								<span th:text="#{label.no}">No</span>
							</label>
						</div>
					</div>
				</div>
				<!-- TITOLO CONVEGNO (attivo se selezionato workshop/seminario) -->
				<div class="item form-group workshop-seminario" style="display: none;">
					<div class="col-xs-1"></div>
					<label class="control-label col-md-3 col-sm-3 col-xs-11">
						<span th:text="#{label.titolo_convegno}"></span>
						<span class="required">*</span>
					</label>
					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12">
						<input type="text" class="form-control titolo-convegno" th:field="${eventoWrapper.evento.titoloConvegno}" />
					</div>
				</div>

				<!-- NUMERO PARTECIPANTI -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>18</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="numeroPartecipanti">
						<span th:text="#{label.numero_partecipanti}">Numero dei partecipanti</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="numeroPartecipanti">
						<input type="text" pattern="numeric" class="form-control optional" th:field="${eventoWrapper.evento.numeroPartecipanti}" />
					</div>
				</div>

				<!-- RESPONSABILI -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>19</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="responsabili">
						<span th:text="#{label.responsabili_scientifici}">Responsabili scientifici</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="responsabili">
					**TODO**
					</div>
				</div>

				<!-- DOCENTI/RELATORI/TUTOR -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>20</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="docenti-relatori-tutor">
						<span th:text="#{label.docenti_relatori_tutor}">Docenti/Relatori/Tutor</span>
						<span class="required">*</span>
					</label>

					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="docenti-relatori-tutor">
					**TODO**
					</div>
				</div>

				<div class="divider-dashed"></div>

				<!-- BLOCCO PROGRAMMA ATTIVITÀ FORMATIVA -->
				<div class="item form-group">
					<label class="col-xs-12">
						<span th:text="#{label.programma_attività_formativa}">Titolo</span>
					</label>
				</div>
				<!-- RAZIONALE -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>21</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="razionale">
						<span th:text="#{label.razionale}">Razionale</span>
						<span class="required">*</span>
					</label>
					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="razionale">
						<input type="text" class="form-control" th:field="${eventoWrapper.evento.razionale}" />
					</div>
				</div>
				<!-- RISULTATI ATTESI -->
				<div class="item form-group">
					<label class="control-label col-xs-1">
						<span>22</span>
					</label>
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="risultatiAttesi">
						<span th:text="#{label.risultati_attesi}">Risultati attesi</span>
						<span class="required">*</span>
					</label>
					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12 input-group">
						<input type="text" class="form-control" />
						<span class="input-group-addon" onclick="aggiungiRisultatoAtteso($(this).prev().val())">
							<i class="fa fa-plus"></i>
						</span>
					</div>
				</div>
				<div class="item form-group">
					<div class="col-md-4 col-sm-4 col-xs-12"></div>
					<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12 input-group">
						<div class="risultati-attesi-container"></div>
					</div>
					<div class="col-lg-3 col-md-1 col-sm-1 col-xs-12"></div>
				</div>
				
				
				<!-- PROGRAMMA EVENTO -->
				<div class="item form-group">
					<label class="control-label col-md-3 col-sm-3 col-xs-11" for="programmaEvento">
						<span th:text="#{label.programma}">Programma</span>
						<span class="required">*</span>
					</label>
				</div>
				<div class='programmaEvento item form-group' id="programma">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 input-group">
						<th:block th:each="programmaGiornaliero,status : ${eventoWrapper.programmaEvento}">
							<div class="item form-group">
								<label class="control-label col-md-3 col-sm-3 col-xs-11">
									<span th:text="#{label.programma_del}">Programma del</span>
									<span class="required">*</span>
								</label>
								<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" >
									<input type="text" th:field="${eventoWrapper.programmaEvento[__${status.index}__].giorno}" />		
								</div>
							</div>
							
							<label>Sede</label><br/> 
							
							<div class="item form-group">
								<label class="control-label col-md-3 col-sm-3 col-xs-11">
									<span th:text="#{label.provincia}">Provincia</span>
									<span class="required">*</span>
								</label>
								<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" >
									<input type="text" th:field="${eventoWrapper.programmaEvento[__${status.index}__].sede.provincia}" />	
								</div>
							</div>
							
							<div class="item form-group">
								<label class="control-label col-md-3 col-sm-3 col-xs-11">
									<span th:text="#{label.comune}">Comune</span>
									<span class="required">*</span>
								</label>
								<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" >
									<input type="text" th:field="${eventoWrapper.programmaEvento[__${status.index}__].sede.comune}" />		
								</div>
							</div>
							
							<div class="item form-group">
								<label class="control-label col-md-3 col-sm-3 col-xs-11">
									<span th:text="#{label.indirizzo}">Indirizzo</span>
									<span class="required">*</span>
								</label>
								<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" >
									<input type="text" th:field="${eventoWrapper.programmaEvento[__${status.index}__].sede.indirizzo}" />	
								</div>
							</div>
							
							<div class="item form-group">
								<label class="control-label col-md-3 col-sm-3 col-xs-11">
									<span th:text="#{label.luogo}">Luogo</span>
									<span class="required">*</span>
								</label>
								<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" >
									<input type="text" th:field="${eventoWrapper.programmaEvento[__${status.index}__].sede.luogo}" />		
								</div>
							</div>
							
							<label>Dettaglio Attività</label>
							
							<div th:attr="data-programma-id=${__${status.index}__}" th:with="last=${#lists.size(eventoWrapper.programmaEvento[__${status.index}__].programma)} - 1">
								
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-11" for="razionale">
										<span th:text="#{label.orario}">Orario</span>
										<span class="required">*</span>
									</label>
									<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="razionale">
										<input type="text" required="required" class="form-control ora"
											th:field="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${last}__].orario}" />	
											<span class="input-group-addon openClock">
     											<i class="glyphicon glyphicon-time"></i>
  											</span>
									</div>
								</div>
								
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-11" for="razionale">
										<span th:text="#{label.argomento}">Argomento</span>
										<span class="required">*</span>
									</label>
									<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="razionale">
										<input type="text" th:field="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${last}__].argomento}" />	
									</div>
								</div>
								
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-11" for="razionale">
										<span th:text="#{label.risultato_atteso}">Risultato Atteso</span>
										<span class="required">*</span>
									</label>
									<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="razionale">
										<select
											class="selectpicker required selectRisultatiAttesi"
											th:field="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${last}__].risultatoAtteso}"
											data-width="100%" data-style="btn-primary"
											data-actions-box="true" data-size="10"
											data-hide-disabled="false"
											title="Seleziona un risultato atteso...">
											<option
												th:each="risultatoAtteso, row: ${eventoWrapper.obiettiviRegionali}"
												th:value="${risultatoAtteso}"
												th:text="${risultatoAtteso}">
											</option>
										</select>
									</div>
								</div>
								
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-11" for="razionale">
										<span th:text="#{label.obiettivo_formativo}">Obiettivo Formativo</span>
										<span class="required">*</span>
									</label>
									<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="razionale">
										<select
											class="selectpicker required selectObiettivoFormativo"
											th:field="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${last}__].obiettivoFormativo}"
											data-width="100%" data-style="btn-primary"
											data-actions-box="true" data-size="10"
											data-hide-disabled="false"
											th:attr="data-programma-id=${__${status.index}__},data-attivita-id=${__${last}__}" 
											onchange="updateMetodologieDidattiche(this)"
											title="Seleziona un obiettivo...">
											<option
												th:each="obiettivoFormativo, row: ${T(it.tredi.ecm.dao.enumlist.ObiettiviFormativiRESEnum).values()}"
												th:value="${obiettivoFormativo}"
												th:text="${obiettivoFormativo.nome}">tipologia selezionata
											</option>
										</select>
									</div>
								</div>
								
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-11" for="razionale">
										<span th:text="#{label.metodologia_didattica}">Metodologia Didattica</span>
										<span class="required">*</span>
									</label>
									<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="razionale">
										<select
											class="selectpicker required selectMetodologieDidattiche"
											th:field="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${last}__].metodologiaDidattica}"
											data-width="100%" data-style="btn-primary"
											data-actions-box="true" data-size="10"
											data-hide-disabled="false"
											th:attr="data-programma-id=${__${status.index}__},data-attivita-id=${__${last}__}" 
											title="Seleziona una Metodologia Didatticha">
											<option
												th:each="metodologiaDidattica, row: ${T(it.tredi.ecm.dao.enumlist.MetodologiaDidatticaRESEnum).values()}"
												th:value="${metodologiaDidattica}"
												th:text="${metodologiaDidattica.nome}">
											</option>
										</select>	
									</div>
								</div>		
								
								
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-11" for="razionale">
										<span th:text="#{label.ore_attivita}">Ore Attività</span>
										<span class="required">*</span>
									</label>
									<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12" id="razionale">
										<input type="text" th:field="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${last}__].oreAttivita}" />
									</div>
								</div>
								
								<div class="item form-group">
									<div class="col-lg-5 col-md-7 col-sm-7 col-xs-12">
										<button type="submit" class="btn btn-primary" name="addAttivitaToProgramma" th:value="${__${status.index}__}">ADD</button>
									</div>
								</div>
							</div>
							
							<table class="datatable-responsive-programma table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
								<tr>
									<th th:text="#{label.orario}">ORARIO</th>
									<th th:text="#{label.argomento}">ARGOMENTO</th>
									<th th:text="#{label.risultato_atteso}">RISULTATAO ATTESO</th>
									<th th:text="#{label.obiettivo_formativo}">OBIETTIVO FORMATIVO</th>
									<th th:text="#{label.metodologia_didattica}">METODOLOGIA DIDATTICA</th>
									<th th:text="#{label.ore_attivita}">ORE ATTIVITA'</th>
									<th></th>
								</tr>
								
								<tr th:attr="data-programma-id=${__${status.index}__},data-attivita-id=${__${status2.index}__}"  th:each="attivita,status2 : ${eventoWrapper.programmaEvento[__${status.index}__].programma}">
									<td>
										<span th:text="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${status2.index}__].orario}"> </span>
									</td>
									<td>
										<span th:text="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${status2.index}__].argomento}"> </span>
									</td>
									<td>
										<span th:text="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${status2.index}__].risultatoAtteso}"> </span>
									</td>
									<td>
										<span th:text="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${status2.index}__].obiettivoFormativo}"> </span>
									</td>
									<td>
										<span th:text="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${status2.index}__].metodologiaDidattica}"> </span>
									</td>
									<td>
										<span th:text="${eventoWrapper.programmaEvento[__${status.index}__].programma[__${status2.index}__].oreAttivita}"> </span>
									</td>
									<td>
										<a th:href="@{|/provider/${eventoWrapper.providerId}/evento/removeAttivita/${__${status.index}__}/${__${status2.index}__}|}">
											<span class="input-group-addon">
												<i class="fa fa-minus"></i>
											</span>
										</a>
									</td>
								</tr>
							</table>
						</th:block>
					</div>
				</div>
				<div class="date-intermedie-container"></div>

				<input id="submitButton" type="submit" style="display: none;" />

			</form>

			<script th:inline="javascript">
			/*<![CDATA[*/
			    var days;
				var months;

				$(document).ready(function() {
					days = getDayNamesShort();
					months = getMonthNames();

					//init daterangepicker al document ready per tutte le date intermedie
					$('.datapicker-intermedia').daterangepicker({
				        singleDatePicker: true,
				        autoApply: false,
				        autoUpdateInput: true,
				        format: "DD/MM/YYYY",
				        locale: {
					        daysOfWeek: days,
			                monthNames: months,
				        }
				    })

				    //medoto per rimozione classe errore
				    $('.datapicker-intermedia').on("hide.daterangepicker", function() {
						$(this).closest('.bad').removeClass('bad').find('div.alert').fadeOut(150, function() {
							$(this).remove();
						});
					});

					//controlla al document ready se mostrare i campi particolari relativi alla tipologia dell'evento
					mostraNascondiCampiTipologiaEvento($('.tipologia_evento_2').val());
					
					var handler = $('.ora').clockpicker({
				    	donetext: [[#{label.applica}]],
				    	align: 'left',
				        autoclose: true,
				        'default': 'now'
				    });

				    $('.openClock').click(function(e) {
				    	e.stopPropagation();
	                    handler.clockpicker('show');
				    })
				    
				    var gotoLink = [[${eventoWrapper.gotoLink}]];
				    if(gotoLink)
				    	 $(document).scrollTo(gotoLink);
				    
				    $(".datatable-responsive-programma").DataTable({
						"bFilter" : false,
						"bInfo" : false,
						"bPaginate" : false,
						"ordering" : false,
						"columnDefs": [ {
							"targets": 5,
							"width": "1px",
							"sClass": "center"
						} ]
					})
				});

				//indice per calcolare i nuovi name delle date intermedie
				var indexDateIntermedie = [[${#lists.size(eventoWrapper.dateIntermedieTemp)}]] - 1;
				var indexRisutato = [[${#lists.size(eventoWrapper.risultatiAttesiTemp)}]] - 1;

				//funzione che aggiunge una data intermedia, aumenta il name in base alle date già presenti
				function aggiungiDataIntermedia(caller) {
					$("<div class='nextDataIntermedia item form-group'></div>")
						.append($("<div class='col-md-4 col-sm-4 col-xs-12'></div>"))
						.append($(caller).parent().clone())
						.appendTo(".date-intermedie-container");
					$(caller).children().toggleClass('fa-plus fa-minus');
					$(caller).attr("onclick", "rimuoviDataIntermedia(this)");
					$(caller).siblings(".datapicker-intermedia").attr("name", "dateIntermedieTemp["+ ++indexDateIntermedie +"]");
					$(caller).siblings(".datapicker-intermedia").attr("id", "dateIntermedieId"+ indexDateIntermedie);
					reinitDaterangepicker();
				}

				//rimuove una data intermedia
				function rimuoviDataIntermedia(caller) {
					$(caller).closest(".item").remove();
				}

				//reinizializza tutte le daterangepicker delle date intermedie
				//(necessario alla creazione di una nuova data)
				function reinitDaterangepicker() {
					$('.datapicker-intermedia').daterangepicker({
				        singleDatePicker: true,
				        autoApply: false,
				        autoUpdateInput: true,
				        format: "DD/MM/YYYY",
				        locale: {
					        daysOfWeek: days,
			                monthNames: months,
				        }
				    })
				}

				//funzione che calcola al doc ready o all'onchange della relativa select
				//se mostrare o meno input aggiuntivi relativi alla tipologia dell'evento
				function mostraNascondiCampiTipologiaEvento(value) {
					switch (value) {
					case 'CONVEGNO_CONGRESSO':
						$(".convegno-congresso").slideDown("slow");
						$(".radio-workshop").iCheck('enable');
						$(".label-radio-workshop").removeClass("label-disabled");
						$(".workshop-seminario").slideUp("slow");
						$(".titolo-convegno").prop("disabled", true);
						break;
					case 'WORKSHOP_SEMINARIO':
						$(".convegno-congresso").slideUp("slow");
						$(".radio-workshop").iCheck('disable');
						$(".label-radio-workshop").addClass("label-disabled");
						$(".workshop-seminario").slideDown("slow");
						$(".titolo-convegno").prop("disabled", false);
						break;
					default:
						$(".convegno-congresso").slideUp("slow");
						$(".workshop-seminario").slideUp("slow");
						$(".radio-workshop").iCheck('disable');
						$(".label-radio-workshop").addClass("label-disabled");
						$(".titolo-convegno").prop("disabled", true);
						break;
					}
				}

				//funzione che aggiunge un risultato atteso alla lista dei temporanei
				//(solo lato client, il salvataggio verrà realizzato al save dell'evento)
				function aggiungiRisultatoAtteso(risultato) {
					console.log(risultato)
					if(risultato.trim()) {
						var container = $("<div class='risultato-atteso' style='display: inline-block'></div>");
						var spanText = $("<div class='text-risultato' style='display: inline-block'></div>").text(risultato);
						var spanButtonRemove = $("<span onclick='rimuoviRisultatoAtteso($(this).parent())'><i class='clickable red fa fa-remove'></i></span>");
						var inputHidden = $("<input type='hidden' name='risultatiAttesiTemp["+ ++indexRisutato +"]' />");
						inputHidden.val(risultato);
						container.append(spanText).append(spanButtonRemove).append(inputHidden);
						container.appendTo(".risultati-attesi-container");
						//TODO index + input hidden + select update
					}
				}

				function rimuoviRisultatoAtteso(container) {
					container.remove();
					//TODO select update
				}
				
				//onchange su obiettivoformativo -> cambia la lista di metodologieDidattiche che si possono selezionare.
				function updateMetodologieDidattiche(caller){
					var obiettivo = $(caller).val();
					var programmaIndex = $(caller).data("programma-id");
					var attivitaIndex = $(caller).data("attivita-id");
					var metodologiePicker_ref ='.selectMetodologieDidattiche[data-programma-id="' + programmaIndex + '"][data-attivita-id="' + attivitaIndex + '"]';
					var start = [[@{/listaMetodologie?obiettivo=}]];
					var end = obiettivo;
					var url = start + end;
					
					console.log(obiettivo);
					console.log($(metodologiePicker_ref));
					$.get(url, function(data){
						$(metodologiePicker_ref).empty();
						for(var item = 0; item < data.length; item++){
							console.log(data[item]);
							console.log(data[item].nome);
							var option = '<option value = "' + data[item] + '">' + data[item].nome + "</option>";
							$(metodologiePicker_ref).append(option);
						}
						$(metodologiePicker_ref).selectpicker('refresh');
					});
				};
				
			/*]]>*/
			</script>
		</div>
	</th:block>
</body>
</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorator="fragments/template">
<head lang="it">
</head>
<body>
	<!-- fragment interno della audit della entity -->
	<th:block th:fragment="audit(type)">
		<div class="x_content">
			<table id="datatable-responsive"
				class="table table-striped table-bordered dt-responsive nowrap datatable-responsive-ordering-user-search"
				cellspacing="0" width="100%">
				<thead>
					<tr>
						<th th:text="#{label.username}">label.username</th>
						<th th:text="#{label.utente}">label.utente</th>
						<th th:text="#{label.dataModifica}">label.dataModifica</th>
						<th th:text="#{label.propertyName}">label.propertyName</th>
						<th th:text="#{label.prima}">label.prima</th>
						<th th:text="#{label.dopo}">label.dopo</th>

						<!-- th>extra info</th -->
					</tr>
				</thead>
				<tbody>
					<tr th:each="prop: ${auditInfo.auditProperties}">
						<td th:text="${prop.userName}"></td>
						<td th:text="${prop.account?.fullNameBase}"></td>
						<td th:text="${prop.dataModifica}"></td>
						<td th:text="${prop.label}"></td>
						<td>
							<th:block th:switch="${prop.auditPropertyChangeInfoTypeEnum}">
							  <th:block th:case="${T(it.tredi.ecm.audit.AuditPropertyChangeInfoTypeEnum).VALUE}">
							     <th:block th:text="${prop.previousValue}" />
							  </th:block>
							  <th:block th:case="${T(it.tredi.ecm.audit.AuditPropertyChangeInfoTypeEnum).FILE}">
								<div th:if="${prop.previousId != null}"><i class="fa fa-download"> </i> <a th:text="File" th:href="@{|/file/${prop.previousId}|}">Scarica File</a></div>
							  </th:block>
							  <th:block th:case="${T(it.tredi.ecm.audit.AuditPropertyChangeInfoTypeEnum).OBJECT}">
								<div th:if="${prop.previousId != null}"><a th:text="${prop.entity + ' (' + prop.previousId + ')'}" th:href="@{|/audit/entity/${prop.entity}/entityId/${prop.previousId}|}">Mostra</a></div>
							  </th:block>
							</th:block>
						</td>
						<td>
							<th:block th:switch="${prop.auditPropertyChangeInfoTypeEnum}">
							  <th:block th:case="${T(it.tredi.ecm.audit.AuditPropertyChangeInfoTypeEnum).VALUE}">
							     <th:block th:text="${prop.afterValue}" />
							  </th:block>
							  <th:block th:case="${T(it.tredi.ecm.audit.AuditPropertyChangeInfoTypeEnum).FILE}">
								<div th:if="${prop.afterId != null}"><i class="fa fa-download"> </i> <a th:text="File" th:href="@{|/file/${prop.afterId}|}">Scarica File</a></div>
							  </th:block>
							  <th:block th:case="${T(it.tredi.ecm.audit.AuditPropertyChangeInfoTypeEnum).OBJECT}">
								<div th:if="${prop.afterId != null}"><a th:text="${prop.entity + ' (' + prop.afterId + ')'}" th:href="@{|/audit/entity/${prop.entity}/entityId/${prop.afterId}|}">Mostra</a></div>
							  </th:block>
							</th:block>
						</td>

						<!-- td style="white-space: pre-wrap;" th:text="${prop.extraInfo}"></td -->
					</tr>
				</tbody>
			</table>

				<br/><br/><br/><br/>

				<div class="item form-group">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="white-space: pre-wrap;">
						<div class="value" th:if="${auditInfo.fullText != null and !#strings.isEmpty(auditInfo.fullText)}" th:text="${auditInfo.fullText}"></div>
					</div>
				</div>
		</div>
	</th:block>

</body>
</html>